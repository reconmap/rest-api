\documentclass[11pt,a4paper]{article}

\usepackage[margin=1in]{geometry}
\usepackage{longtable}
\usepackage{array}
\usepackage{hyperref}
\usepackage{setspace}

\setstretch{1.2}

\begin{document}

\begin{center}
    {\LARGE \textbf{Penetration Test Report}}
\end{center}

\vspace{1em}

\noindent
\textbf{Project:} {{ project != null && project.name != null ? project.name : "" }} \\
\textbf{Prepared for:} {{ client != null && client.name != null ? client.name : "" }} \\
\textbf{Prepared by:} {{ serviceProvider != null && serviceProvider.name != null ? serviceProvider.name : "" }} \\
\textbf{Date:} {{ date != null ? date : "" }}

{{ if lastRevisionName != null }}
\vspace{0.5em}

\noindent
\textbf{Last revision:} {{ lastRevisionName }}
{{ end }}

\hrule
\vspace{1em}

{{ if revisions != null && revisions.size > 0 }}
\section*{Revisions}

\begin{longtable}{|p{3cm}|p{4cm}|p{7cm}|}
\hline
\textbf{Date} & \textbf{Revision name} & \textbf{Description} \\
\hline
{{ for revision in revisions }}
{{ revision.insert_ts != null ? revision.insert_ts : "" }} &
{{ revision.version_name != null ? revision.version_name : "" }} &
{{ revision.version_description != null ? revision.version_description : "" }} \\
\hline
{{ end }}
\end{longtable}
{{ end }}

\hrule
\vspace{1em}

\section*{Client}

\textbf{Name}\\
{{ client != null && client.name != null ? client.name : "" }}

\vspace{0.5em}

\textbf{Address}\\
{{ client != null && client.address != null ? client.address : "" }}

\vspace{0.5em}

\textbf{URL}\\
{{ client != null && client.url != null ? client.url : "" }}

\vspace{1em}

\textbf{Contacts}
\begin{itemize}
{{ for c in (client != null && client.contacts != null ? client.contacts : empty_array) }}
    \item
    \textbf{Name:} {{ c.name != null ? c.name : "" }} \\
    \textbf{Phone:} {{ c.phone != null ? c.phone : "" }} \\
    \textbf{Email:} {{ c.email != null ? c.email : "" }} \\
    \textbf{Role:} {{ c.role != null ? c.role : "" }}
{{ end }}
\end{itemize}

\hrule
\vspace{1em}

\section*{Pentesting Team}

\begin{itemize}
{{ for u in (users != null ? users : empty_array) }}
    \item
    \textbf{{ u.full_name != null ? u.full_name : "" }} \\
    \emph{{ u.short_bio != null ? u.short_bio : "" }}
{{ end }}
\end{itemize}

\hrule
\vspace{1em}

\section*{Project Overview}

{{ project != null && project.description != null ? project.description : "" }}

\subsection*{Findings Overview}

\begin{longtable}{|p{6cm}|p{3cm}|}
\hline
\textbf{Severity} & \textbf{Count} \\
\hline
{{ for f in (findings != null && findings.stats != null ? findings.stats : empty_array) }}
{{ f.severity != null ? string.capitalize f.severity : "" }} &
{{ f.count != null ? f.count : "0" }} \\
\hline
{{ end }}
\end{longtable}

\hrule
\vspace{1em}

\section*{Assets}

\begin{longtable}{|p{7cm}|p{5cm}|}
\hline
\textbf{Target Name} & \textbf{Type} \\
\hline
{{ for a in (assets != null ? assets : empty_array) }}
{{ a.name != null ? a.name : "" }} &
{{ a.kind != null ? a.kind : "" }} \\
\hline
{{ end }}
\end{longtable}

\hrule
\vspace{1em}

\section*{Findings}

{{ for v in (findings != null && findings.list != null ? findings.list : empty_array) }}

\subsection*{{ v.summary != null ? v.summary : "" }}

\begin{description}
    \item[Category:] {{ v.category_name != null ? v.category_name : "" }}
    \item[Severity:] {{ v.risk != null ? string.capitalize v.risk : "" }}
    \item[CVSS Score:] {{ v.cvss_score != null ? v.cvss_score : "" }}
    \item[OWASP Vector:] {{ v.owasp_vector != null ? v.owasp_vector : "" }}
    \item[OWASP Overall Rating:] {{ v.owasp_overall != null ? v.owasp_overall : "" }}
\end{description}

\textbf{Description}

{{ v.description != null ? v.description : "" }}

\vspace{0.5em}

\textbf{Proof of Concept}

{{ v.proof_of_concept != null ? v.proof_of_concept : "" }}

\vspace{0.5em}

\textbf{Remediation}

{{ v.remediation != null ? v.remediation : "" }}

\vspace{1em}
\hrule
\vspace{1em}

{{ end }}

\end{document}
